<Window x:Class="Task2.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:local="clr-namespace:Task2"
        xmlns:vm="clr-namespace:Task2.ViewModels"
        mc:Ignorable="d"
        AllowsTransparency="True"
        Background="Transparent"
        WindowStyle="None"
        WindowStartupLocation="CenterScreen"
        ResizeMode="NoResize"
        Height="450" 
        Width="800"
        Title="MainWindow">

  <Window.DataContext>
    <vm:MainWindowViewModel />
  </Window.DataContext>

  <Window.Resources>
    <Style TargetType="Button" x:Key="DefaultButtonStyle">
      <Setter Property="OverridesDefaultStyle" Value="True" />
      <Setter Property="Margin" Value="5" />
    </Style>
  </Window.Resources>

  <Border Background="White"
          CornerRadius="30">

    <Grid>
      <Grid.RowDefinitions>
        <RowDefinition Height="Auto" />
        <RowDefinition Height="*" />
      </Grid.RowDefinitions>

      <Grid Grid.Row="0"
            Background="Transparent">

        <Grid.InputBindings>
          <MouseBinding Gesture="LeftClick" Command="{Binding DragMoveCommand}" />
        </Grid.InputBindings>
        
        <TextBlock VerticalAlignment="Center"
                   HorizontalAlignment="Left"
                   Margin="20"
                   FontSize="15"
                   Text="Тестовое WPF-приложение для SmartMealService" />

        <StackPanel Orientation="Horizontal"
                    HorizontalAlignment="Right">

          <Button Style="{StaticResource DefaultButtonStyle}"
                  Command="{Binding CollapseCommand}">
            <Button.Template>
              <ControlTemplate TargetType="Button">
                <Image Source="/Assets/line.png" />
              </ControlTemplate>
            </Button.Template>
          </Button>

          <Button Style="{StaticResource DefaultButtonStyle}"
                  Command="{Binding CloseCommand}">
            <Button.Template>
              <ControlTemplate TargetType="Button">
                <Image Source="/Assets/close.png" />
              </ControlTemplate>
            </Button.Template>
          </Button>

        </StackPanel>

      </Grid>

      <DataGrid Grid.Row="1"
                Margin="25 0 20 30"
                Background="White"
                BorderThickness="0"
                AutoGenerateColumns="False" 
                CanUserAddRows="False" 
                CanUserDeleteRows="False"
                RowHeaderWidth="0"
                ItemsSource="{Binding EnvironmentVariables}">

        <DataGrid.Resources>
          <Style TargetType="DataGridColumnHeadersPresenter">
            <Setter Property="Template">
              <Setter.Value>
                <ControlTemplate TargetType="DataGridColumnHeadersPresenter">
                  <Grid>
                    <Grid.ColumnDefinitions>
                      <ColumnDefinition Width="*" />
                      <ColumnDefinition Width="*" />
                      <ColumnDefinition Width="*" />
                    </Grid.ColumnDefinitions>
                    <ItemsPresenter Grid.ColumnSpan="3"/>
                    <Border Grid.Column="0" 
                            BorderBrush="Black"
                            BorderThickness="0 0 1 1"
                            Background="Transparent" />
                    <Border Grid.Column="1" 
                            BorderBrush="Black"
                            BorderThickness="0 0 1 1"
                            Background="Transparent" />
                    <Border Grid.Column="2" 
                            BorderBrush="Black"
                            BorderThickness="0 0 0 1"
                            Background="Transparent" />
                  </Grid>
                </ControlTemplate>
              </Setter.Value>
            </Setter>
          </Style>
        </DataGrid.Resources>

        <DataGrid.Columns>
          <DataGridTextColumn Header="Поле" Binding="{Binding Name}" Width="*" IsReadOnly="True"/>
          <DataGridTextColumn Header="Значение" Binding="{Binding Value}" Width="*"/>
          <DataGridTextColumn Header="Комментарий" Binding="{Binding Comment}" Width="*" IsReadOnly="True"/>
        </DataGrid.Columns>

        <DataGrid.ColumnHeaderStyle>
          <Style TargetType="DataGridColumnHeader">
            <Setter Property="HorizontalAlignment" Value="Center" />
            <Setter Property="Background" Value="White" />
            <Setter Property="Foreground" Value="Black" />
            <Setter Property="FontWeight" Value="Bold" />
          </Style>
        </DataGrid.ColumnHeaderStyle>

      </DataGrid>

      <Border Grid.Row="1"
              Margin="20 0 20 20"
              BorderThickness="3"
              BorderBrush="#48535f"
              CornerRadius="30" />

      <Border Grid.Row="1"
              Margin="10 -10 10 10"
              BorderThickness="10"
              BorderBrush="White"
              CornerRadius="36" />

    </Grid>
  </Border>
</Window>
